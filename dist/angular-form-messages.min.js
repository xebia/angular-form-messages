angular.module("angularFormMessages",[]),angular.module("angularFormMessages").directive("afField",["$rootScope","MESSAGE_TYPES","MessageService",function(a,b,c){return{priority:100,require:["ngModel","afField","^afSubmit","^form"],controller:function(){function a(a){return function(b){this.$messages[b]={type:a}}}this.$messages={},this.setError=a(b[3]),this.setWarning=a(b[2]),this.setInfo=a(b[1]),this.setSuccess=a(b[0])},link:function(d,e,f,g){function h(){l.$dirty&&"change"===n.triggerOn&&j()}function i(a,b){b!==a&&j()}function j(){l.$validate();var d=[],e=Object.keys(l.$error);angular.forEach(e,function(a){d.push({message:a,type:m.$messages[a]&&m.$messages[a].type||b[3]})}),a.$broadcast("validation",o.$name+"."+l.$name,d,c.determineMessageType(d))}function k(b){return"submit"===n.triggerOn&&a.$broadcast("validation",o.$name+"."+l.$name,[]),b}var l=g[0],m=g[1],n=g[2],o=g[3];d.$watchCollection(o.$name+'["'+l.$name+'"].$error',h),d.$watch(f.afTrigger,i),l.$parsers.push(k),d.$on("validate",j)}}}]),angular.module("angularFormMessages").directive("afMessage",["MessageService",function(a){return{scope:!0,require:["^form","afMessage"],controller:angular.noop,link:function(b,c,d,e){var f=e[0],g=e[1];g.messageId=f.$name+"."+(d.afMessage||d.afMessageId),a.validation(g.messageId,function(a){b.messages=a})}}}]),angular.module("angularFormMessages").directive("afMessageLabel",["translateFilter","TranslateService",function(a,b){return{restrict:"A",require:"^afMessage",link:function(c,d,e,f){e.$observe("afMessageLabel",function(c){var e=f.messageId+"."+c,g=c,h=a(b.hasLabel(e)?e:g);d.html(void 0===h?c:h)})}}}]),angular.module("angularFormMessages").directive("afSubmit",["$rootScope","MessageService",function(a,b){return{require:["form","afSubmit"],controller:function(){},link:function(c,d,e,f){function g(a){return angular.isObject(a)&&"function"==typeof a.then}function h(d){d.preventDefault(),c.$broadcast("validate"),c.$apply(function(){function d(c){angular.forEach(c.validation,function(c,d){a.$broadcast("validation",d,c,b.determineMessageType(c))})}if(i.$valid){var f=c.$eval(e.afSubmit);g(f)&&(c.isSubmitting=!0,f["catch"](d)["finally"](function(){c.isSubmitting=!1}))}})}var i=f[0],j=f[1];d.on("submit",h),j.triggerOn=e.afTriggerOn||"change",c.$watch(e.afShowSuccess,function(a){j.showSuccess=!!a})}}}]),angular.module("angularFormMessages").directive("afSubmitButton",function(){return{link:function(a,b,c){a.$watch("isSubmitting",function(a){c.$set("disabled",a?"disabled":void 0)})}}}),angular.module("angularFormMessages").constant("MESSAGE_TYPES",["SUCCESS","INFO","WARNING","ERROR"]).factory("MessageService",["$rootScope","MESSAGE_TYPES",function(a,b){return{determineMessageType:function(a){var c=-1;return angular.forEach(a,function(a){var d=b.indexOf(a.type);d>c&&(c=d)}),-1===c?void 0:b[c]},validation:function(b,c){a.$on("validation",function(a,d,e,f){d===b&&c(e,f)})}}}]);